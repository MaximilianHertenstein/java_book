# Start from a Python base (with Thebe-ready Python)
FROM python:3.12-slim

# Install required system packages
RUN apt-get update && \
    apt-get install -y wget unzip curl && \
    rm -rf /var/lib/apt/lists/*

# Install JDK 25 manually
WORKDIR /opt
RUN wget https://download.java.net/java/early_access/jdk25/XYZ/GPL/openjdk-25_linux-x64_bin.tar.gz -O jdk25.tar.gz && \
    tar -xzf jdk25.tar.gz && \
    rm jdk25.tar.gz

# Set JAVA_HOME and PATH
ENV JAVA_HOME=/opt/jdk-25
ENV PATH="$JAVA_HOME/bin:$PATH"

# Verify Java version
RUN java -version

# Install Python packages
RUN pip install --no-cache-dir jjava ipython ipykernel thebe

# Optional: mark Python kernel available
RUN python -m ipykernel install --user --name=python3 --display-name "Python 3"
